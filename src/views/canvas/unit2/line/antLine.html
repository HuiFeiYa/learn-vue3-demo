<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas id="canvas" width="500" height="500"></canvas>
  <script>
    const canvas = document.getElementById('canvas')
    const ctx = canvas.getContext('2d')
    // 默认偏移量为 0.0 是浮点数
    let offset = 0.0
    function antLine() {
      ctx.beginPath()
      ctx.setLineDash([5,10])
      ctx.moveTo(50,50)
      ctx.lineTo(200,50)
      ctx.lineTo(200,200)
      ctx.lineTo(50,200)
      ctx.lineTo(50,50)
      ctx.stroke()
    }
    function changeOffset() {
      offset += 3.0 
      ctx.setLineDash([5,10])
      // 当 lineDashOffset 的距离改变，当值增加向左移动
      ctx.lineDashOffset = offset
      ctx.beginPath()
      ctx.rect(10,10,100,100)
      ctx.stroke()
    }
    /*
    setInterval(() => {
      ctx.clearRect(0,0,canvas.width,canvas.height)
      changeOffset()
    }, 200);
    */

    function arcTo() {
      ctx.setLineDash([])
      ctx.beginPath()
      // 根据 (50,20)和(150,100)两端的连线来生成切线，圆的半径为 30
      ctx.moveTo(150,20)
      ctx.arcTo(150,100,50,20,30)
      ctx.stroke()
      // 根据 (50,20)和(150,100)两端的连线来生成切线，圆的半径为 50
      // ctx.moveTo(150,20)
      // ctx.arcTo(150,100,50,20,50)
      // ctx.stroke()

      // ctx.lineWidth = 10
      ctx.lineTo(0,0)
      ctx.fillStyle = 'blue'
      ctx.fillRect(150,20,10,10)
      ctx.fillText('(150,20)',155,15)
      ctx.fillStyle = 'red'
      ctx.fillRect(150,100,10,10)
      ctx.fillText('(150,100)',160,110)
      ctx.fillRect(50,20,10,10)
      ctx.fillText('(50,20)',10,20)
      // 描绘虚线切线
      ctx.setLineDash([5,5])
      ctx.moveTo(150,20)
      ctx.lineTo(150,100)
      ctx.lineTo(50,20)
      // 用虚线补全圆
      ctx.arc(120,38,30,0,2*Math.PI)
      ctx.stroke()
    }
    // arcTo()


    function axis() {
      // 绘制背景
      drawGrid(20,20)
    }
    function drawGrid(stepX,stepY) {
      ctx.lineWidth = 0.5
      // 绘制列条纹，从左往右绘制
      for(let i=20.5,t=0;i<canvas.width-20;i+=stepX,t++) {
        if(t===0) {
          ctx.strokeStyle = 'blue'
        }else{
          ctx.strokeStyle = '#aaa'
        }
        ctx.beginPath()
        // 绘制一条直线
        ctx.moveTo(i,0)
        ctx.lineTo(i,canvas.height-20)
        ctx.stroke()

        // 设置坐标点
        ctx.strokeStyle = 'blue'
        if(t === 0) {
          continue
        }
        ctx.beginPath()
        ctx.moveTo(i,canvas.height-15)
        if(t % 5 === 0 ) {
          ctx.lineTo(i,canvas.height-30)
        }else{
          ctx.lineTo(i,canvas.height-25)
        }
        ctx.stroke()
      }
      // 绘制横条纹,从底部往上绘制
      for(let j=canvas.height - 20.5,t=0;j>0;j-=stepY,t++) {
        if(t===0) {
          ctx.strokeStyle = 'blue'
        }else{
          ctx.strokeStyle = '#aaa'
        }
        ctx.beginPath()
        ctx.moveTo(20.5,j)
        ctx.lineTo(canvas.width-20,j)
        ctx.stroke()

        // 设置坐标点
        if(t === 0) {
          continue
        }
        ctx.strokeStyle = 'blue'
        ctx.beginPath()
        ctx.moveTo(15,j)
        if(t % 5 === 0 ) {
          ctx.lineTo(35,j)
        }else{
          ctx.lineTo(25,j)
        }
        ctx.stroke()
      }
      // 重新绘制三个点
      ctx.beginPath()
      ctx.arc(100,100,4,0,2*Math.PI)
      ctx.fillStyle = 'red'
      ctx.fill()
      ctx.beginPath()
      ctx.arc(200,10,4,0,2*Math.PI)
      ctx.fillStyle = 'red'
      ctx.fill()
      ctx.arc(400,170,4,0,2*Math.PI)
      ctx.fillStyle = 'red'
      ctx.fill()

      // 使用虚线连接这三个点
      ctx.beginPath()
      ctx.moveTo(100,100)
      // ctx.lineDashOffset= [5,5]
      ctx.setLineDash([5,5])
      ctx.lineTo(200,10)
      ctx.lineTo(400,170)
      ctx.lineTo(100,100)
      ctx.stroke()
      
      // 以(400,170) 为起点,(100,100) 和 (200,10)两点连线为切线绘制圆弧
      ctx.strokeStyle = 'red'
      ctx.beginPath()
      ctx.moveTo(400,170)
      // 设置圆弧半径为 40,如果40不足以在三点之间形成一个圆，
      // 首先它沿着 (400,170)和(200,10) 这条线绘制路径，直到找到半径为 40 的位置开始绘制
      // 如果写出 ctx.arcTo(100,100,200,10,40),那么会沿着 (400,170)和(100,100) 这条线绘制路径
      ctx.arcTo(200,10,100,100,40)
      ctx.moveTo(400,170)
      ctx.arcTo(100,100,200,10,40)
      ctx.stroke()
    }
    // ctx.translate(100,100)
    // ctx.rotate(Math.PI/8)
    axis()
  </script>
</body>
</html>